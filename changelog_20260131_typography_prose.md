# CHANGELOG — 2026-01-31 (v8.16.15)

目标：文章与社区动态的排版“整齐划一”，在网页与手机端都保持统一的字号、行距、段落间距与媒体展示效果。

## ✅ 完成内容

### 1) 统一排版系统（KS Prose）
- 新增一套可复用的排版样式：`.ks-prose`
- 新增阅读宽度控制：`.ks-reading`（文章详情页使用，避免行宽过长）
- 新增长文本输入框样式：`.prose-input`（文章正文、动态、评论/回复输入）

### 2) 文章（阅读 + 编辑预览）
- 文章正文容器增加：`ks-prose` + `ks-reading`
- Markdown 渲染增强：
  - 图片/视频/PDF 强制成为独立块，避免“夹在一段话里”导致布局混乱
  - 连续多张图片自动合并为响应式网格（桌面 3 列 / 平板 2 列 / 手机 1 列）
  - 单张图片默认不裁切（contain），多图网格默认裁切（cover）保证整齐

### 3) 社区动态（Moments）
- 动态正文、留言/回复内容增加：`ks-prose`
- 文本渲染优化：
  - 将“空行”转换为段落 `<p>`（更规范、更易读）
  - 单行换行仍保留 `<br/>`
- 动态/评论/回复的输入框统一为 `.prose-input`

### 4) 缓存更新
- 全站 `styles.css` 版本参数已统一更新为 `20260131_003`
- 文章详情 / 写文章 / 社区动态对应 JS 版本参数已更新，避免旧缓存。

## 🔧 影响文件
- styles.css
- article.js / article.html
- article-editor.js / article-editor.html
- moments.js / moments.html

